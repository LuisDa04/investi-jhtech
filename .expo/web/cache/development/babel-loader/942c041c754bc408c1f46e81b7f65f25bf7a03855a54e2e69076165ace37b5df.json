{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\invit\\\\Downloads\\\\investi-app\\\\src\\\\screens\\\\UploadAvatarScreen.tsx\";\nimport { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useTranslation } from \"react-i18next\";\nimport { ArrowLeft, Camera } from \"lucide-react-native\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { getCurrentUserId, updateUser } from \"../api\";\nimport { supabase } from \"../supabase\";\nimport { LanguageToggle } from \"../components/LanguageToggle\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function UploadAvatarScreen({\n  navigation\n}) {\n  const {\n    t\n  } = useTranslation();\n  const [avatar, setAvatar] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const pickImage = async () => {\n    const {\n      status\n    } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert('Error', 'Se necesitan permisos para acceder a la galería');\n      return;\n    }\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.8\n    });\n    if (!result.canceled) {\n      setAvatar(result.assets[0]);\n    }\n  };\n  const uploadAvatarToStorage = async (userId, file) => {\n    try {\n      const {\n        data: buckets\n      } = await supabase.storage.listBuckets();\n      const bucketExists = buckets?.some(bucket => bucket.name === 'avatars');\n      if (!bucketExists) {\n        console.log('Creating avatars bucket...');\n        const {\n          error: bucketError\n        } = await supabase.storage.createBucket('avatars', {\n          public: true,\n          allowedMimeTypes: ['image/png', 'image/jpeg', 'image/jpg'],\n          fileSizeLimit: 5242880\n        });\n        if (bucketError) {\n          console.error('Error creating bucket:', bucketError);\n        }\n      }\n      const fileExt = file.uri.split(\".\").pop();\n      const fileName = `${userId}/avatar.${fileExt}`;\n      const response = await fetch(file.uri);\n      const blob = await response.blob();\n      const {\n        data,\n        error\n      } = await supabase.storage.from(\"avatars\").upload(fileName, blob, {\n        cacheControl: '3600',\n        upsert: true\n      });\n      if (error) {\n        console.error('Storage upload error:', error);\n        throw error;\n      }\n      const {\n        data: {\n          publicUrl\n        }\n      } = supabase.storage.from(\"avatars\").getPublicUrl(fileName);\n      return publicUrl;\n    } catch (error) {\n      console.error('Upload error:', error);\n      throw error;\n    }\n  };\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      const uid = await getCurrentUserId();\n      if (!uid) {\n        Alert.alert(\"Error\", \"No se pudo obtener el ID del usuario\");\n        return;\n      }\n      if (avatar) {\n        try {\n          const avatarUrl = await uploadAvatarToStorage(uid, avatar);\n          await updateUser(uid, {\n            photo_url: avatarUrl\n          });\n          Alert.alert(\"Éxito\", \"Avatar subido correctamente\", [{\n            text: \"OK\",\n            onPress: () => navigation.navigate(\"PickGoals\")\n          }]);\n        } catch (uploadError) {\n          console.error(\"Upload failed:\", uploadError);\n          Alert.alert(\"Aviso\", \"No se pudo subir la imagen, pero puedes continuar. Podrás agregar tu foto más tarde.\", [{\n            text: \"Continuar\",\n            onPress: () => navigation.navigate(\"PickGoals\")\n          }, {\n            text: \"Reintentar\",\n            onPress: () => handleSave()\n          }]);\n        }\n      } else {\n        navigation.navigate(\"PickGoals\");\n      }\n    } catch (error) {\n      console.error(\"General error:\", error);\n      Alert.alert(\"Error\", \"Ocurrió un error inesperado\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSkip = () => {\n    navigation.navigate(\"PickGoals\");\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.header,\n      children: [_jsxDEV(TouchableOpacity, {\n        style: styles.backButton,\n        onPress: () => navigation.goBack(),\n        children: _jsxDEV(ArrowLeft, {\n          size: 24,\n          color: \"#111\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.headerTitle,\n        children: t(\"avatar.title\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), _jsxDEV(TouchableOpacity, {\n        style: styles.skipButton,\n        onPress: handleSkip,\n        children: _jsxDEV(Text, {\n          style: styles.skipButtonText,\n          children: t(\"avatar.skip\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.content,\n      children: [_jsxDEV(View, {\n        style: styles.avatarContainer,\n        children: _jsxDEV(View, {\n          style: styles.avatarWrapper,\n          children: avatar ? _jsxDEV(Image, {\n            source: {\n              uri: avatar.uri\n            },\n            style: styles.avatar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this) : _jsxDEV(View, {\n            style: styles.avatarPlaceholder,\n            children: _jsxDEV(Camera, {\n              size: 40,\n              color: \"#ccc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), _jsxDEV(TouchableOpacity, {\n        style: styles.changePhotoButton,\n        onPress: pickImage,\n        children: [_jsxDEV(Camera, {\n          size: 20,\n          color: \"#2673f3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.changePhotoText,\n          children: t(\"avatar.changePhoto\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.subtitle,\n        children: t(\"avatar.subtitle\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.footer,\n      children: _jsxDEV(TouchableOpacity, {\n        style: [styles.continueButton, loading && styles.continueButtonDisabled],\n        onPress: handleSave,\n        disabled: loading,\n        children: loading ? _jsxDEV(ActivityIndicator, {\n          color: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this) : _jsxDEV(Text, {\n          style: styles.continueButtonText,\n          children: t(\"avatar.continue\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.languageToggleContainer,\n      children: _jsxDEV(LanguageToggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#f7f8fa\"\n  },\n  header: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 20,\n    paddingTop: 10,\n    paddingBottom: 20\n  },\n  backButton: {\n    width: 60\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: \"600\",\n    color: \"#111\"\n  },\n  skipButton: {\n    width: 60,\n    alignItems: \"flex-end\"\n  },\n  skipButtonText: {\n    color: \"#2673f3\",\n    fontSize: 16,\n    fontWeight: \"500\"\n  },\n  content: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: 24\n  },\n  avatarContainer: {\n    marginBottom: 40\n  },\n  avatarWrapper: {\n    width: 200,\n    height: 200,\n    borderRadius: 100,\n    overflow: \"hidden\",\n    borderWidth: 3,\n    borderColor: \"#e5e5e5\"\n  },\n  avatar: {\n    width: \"100%\",\n    height: \"100%\"\n  },\n  avatarPlaceholder: {\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"#f0f0f0\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  changePhotoButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    borderWidth: 1,\n    borderColor: \"#2673f3\",\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 12,\n    marginBottom: 40,\n    backgroundColor: \"white\"\n  },\n  changePhotoText: {\n    color: \"#2673f3\",\n    fontSize: 16,\n    fontWeight: \"500\",\n    marginLeft: 8\n  },\n  subtitle: {\n    fontSize: 16,\n    color: \"#667\",\n    textAlign: \"center\",\n    lineHeight: 22,\n    paddingHorizontal: 20\n  },\n  footer: {\n    paddingHorizontal: 24,\n    paddingBottom: 40,\n    paddingTop: 20\n  },\n  continueButton: {\n    backgroundColor: \"#2673f3\",\n    paddingVertical: 16,\n    borderRadius: 12,\n    alignItems: \"center\"\n  },\n  continueButtonDisabled: {\n    backgroundColor: \"#a0a0a0\"\n  },\n  continueButtonText: {\n    color: \"white\",\n    fontSize: 16,\n    fontWeight: \"600\"\n  },\n  languageToggleContainer: {\n    position: \"absolute\",\n    top: 60,\n    right: 20\n  }\n});","map":{"version":3,"names":["_jsxFileName","useState","View","Text","TouchableOpacity","StyleSheet","SafeAreaView","Image","Alert","ActivityIndicator","useTranslation","ArrowLeft","Camera","ImagePicker","getCurrentUserId","updateUser","supabase","LanguageToggle","jsxDEV","_jsxDEV","UploadAvatarScreen","navigation","t","avatar","setAvatar","loading","setLoading","pickImage","status","requestMediaLibraryPermissionsAsync","alert","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","canceled","assets","uploadAvatarToStorage","userId","file","data","buckets","storage","listBuckets","bucketExists","some","bucket","name","console","log","error","bucketError","createBucket","public","allowedMimeTypes","fileSizeLimit","fileExt","uri","split","pop","fileName","response","fetch","blob","from","upload","cacheControl","upsert","publicUrl","getPublicUrl","handleSave","uid","avatarUrl","photo_url","text","onPress","navigate","uploadError","handleSkip","style","styles","container","children","header","backButton","goBack","size","color","lineNumber","columnNumber","headerTitle","skipButton","skipButtonText","content","avatarContainer","avatarWrapper","source","avatarPlaceholder","changePhotoButton","changePhotoText","subtitle","footer","continueButton","continueButtonDisabled","disabled","continueButtonText","languageToggleContainer","create","flex","backgroundColor","flexDirection","alignItems","justifyContent","paddingHorizontal","paddingTop","paddingBottom","width","fontSize","fontWeight","marginBottom","height","borderRadius","overflow","borderWidth","borderColor","paddingVertical","marginLeft","textAlign","lineHeight","position","top","right"],"sources":["C:/Users/invit/Downloads/investi-app/src/screens/UploadAvatarScreen.tsx"],"sourcesContent":["\"use client\"  \n  \nimport { useState } from \"react\"  \nimport { View, Text, TouchableOpacity, StyleSheet, SafeAreaView, Image, Alert, ActivityIndicator } from \"react-native\"  \nimport { useTranslation } from \"react-i18next\"  \nimport { ArrowLeft, Camera } from \"lucide-react-native\"  \nimport * as ImagePicker from \"expo-image-picker\"  \nimport { getCurrentUserId, updateUser } from \"../api\"  \nimport { supabase } from \"../supabase\"  \nimport { LanguageToggle } from \"../components/LanguageToggle\"  \n  \nexport function UploadAvatarScreen({ navigation }: any) {  \n  const { t } = useTranslation()  \n  const [avatar, setAvatar] = useState<any>(null)  \n  const [loading, setLoading] = useState(false)  \n  \n  const pickImage = async () => {  \n    // Solicitar permisos primero  \n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync()  \n    if (status !== 'granted') {  \n      Alert.alert('Error', 'Se necesitan permisos para acceder a la galería')  \n      return  \n    }  \n  \n    const result = await ImagePicker.launchImageLibraryAsync({  \n      mediaTypes: ImagePicker.MediaTypeOptions.Images,  \n      allowsEditing: true,  \n      aspect: [1, 1],  \n      quality: 0.8,  \n    })  \n  \n    if (!result.canceled) {  \n      setAvatar(result.assets[0])  \n    }  \n  }  \n  \n  const uploadAvatarToStorage = async (userId: string, file: any) => {  \n    try {  \n      // Crear el bucket si no existe  \n      const { data: buckets } = await supabase.storage.listBuckets()  \n      const bucketExists = buckets?.some(bucket => bucket.name === 'avatars')  \n        \n      if (!bucketExists) {  \n        console.log('Creating avatars bucket...')  \n        const { error: bucketError } = await supabase.storage.createBucket('avatars', {  \n          public: true,  \n          allowedMimeTypes: ['image/png', 'image/jpeg', 'image/jpg'],  \n          fileSizeLimit: 5242880 // 5MB  \n        })  \n          \n        if (bucketError) {  \n          console.error('Error creating bucket:', bucketError)  \n          // Continuar aunque falle la creación del bucket  \n        }  \n      }  \n  \n      // Preparar el archivo para upload  \n      const fileExt = file.uri.split(\".\").pop()  \n      const fileName = `${userId}/avatar.${fileExt}`  \n  \n      // Convertir la imagen a blob  \n      const response = await fetch(file.uri)  \n      const blob = await response.blob()  \n  \n      // Subir el archivo  \n      const { data, error } = await supabase.storage  \n        .from(\"avatars\")  \n        .upload(fileName, blob, {  \n          cacheControl: '3600',  \n          upsert: true  \n        })  \n  \n      if (error) {  \n        console.error('Storage upload error:', error)  \n        throw error  \n      }  \n  \n      // Obtener la URL pública  \n      const { data: { publicUrl } } = supabase.storage  \n        .from(\"avatars\")  \n        .getPublicUrl(fileName)  \n  \n      return publicUrl  \n    } catch (error) {  \n      console.error('Upload error:', error)  \n      throw error  \n    }  \n  }  \n  \n  const handleSave = async () => {  \n    setLoading(true)  \n    try {  \n      const uid = await getCurrentUserId()  \n      if (!uid) {  \n        Alert.alert(\"Error\", \"No se pudo obtener el ID del usuario\")  \n        return  \n      }  \n  \n      if (avatar) {  \n        try {  \n          // Intentar subir el avatar  \n          const avatarUrl = await uploadAvatarToStorage(uid, avatar)  \n            \n          // Actualizar el perfil del usuario con la URL del avatar  \n          await updateUser(uid, { photo_url: avatarUrl })  \n            \n          Alert.alert(\"Éxito\", \"Avatar subido correctamente\", [  \n            { text: \"OK\", onPress: () => navigation.navigate(\"PickGoals\") }  \n          ])  \n        } catch (uploadError: any) {  \n          console.error(\"Upload failed:\", uploadError)  \n            \n          // Si falla el upload, continuar sin avatar  \n          Alert.alert(  \n            \"Aviso\",   \n            \"No se pudo subir la imagen, pero puedes continuar. Podrás agregar tu foto más tarde.\",  \n            [  \n              { text: \"Continuar\", onPress: () => navigation.navigate(\"PickGoals\") },  \n              { text: \"Reintentar\", onPress: () => handleSave() }  \n            ]  \n          )  \n        }  \n      } else {  \n        // Si no hay avatar, simplemente continuar  \n        navigation.navigate(\"PickGoals\")  \n      }  \n    } catch (error: any) {  \n      console.error(\"General error:\", error)  \n      Alert.alert(\"Error\", \"Ocurrió un error inesperado\")  \n    } finally {  \n      setLoading(false)  \n    }  \n  }  \n  \n  const handleSkip = () => {  \n    navigation.navigate(\"PickGoals\")  \n  }  \n  \n  return (  \n    <SafeAreaView style={styles.container}>  \n      <View style={styles.header}>  \n        <TouchableOpacity style={styles.backButton} onPress={() => navigation.goBack()}>  \n          <ArrowLeft size={24} color=\"#111\" />  \n        </TouchableOpacity>  \n        <Text style={styles.headerTitle}>{t(\"avatar.title\")}</Text>  \n        <TouchableOpacity style={styles.skipButton} onPress={handleSkip}>  \n          <Text style={styles.skipButtonText}>{t(\"avatar.skip\")}</Text>  \n        </TouchableOpacity>  \n      </View>  \n  \n      <View style={styles.content}>  \n        <View style={styles.avatarContainer}>  \n          <View style={styles.avatarWrapper}>  \n            {avatar ? (  \n              <Image source={{ uri: avatar.uri }} style={styles.avatar} />  \n            ) : (  \n              <View style={styles.avatarPlaceholder}>  \n                <Camera size={40} color=\"#ccc\" />  \n              </View>  \n            )}  \n          </View>  \n        </View>  \n  \n        <TouchableOpacity style={styles.changePhotoButton} onPress={pickImage}>  \n          <Camera size={20} color=\"#2673f3\" />  \n          <Text style={styles.changePhotoText}>{t(\"avatar.changePhoto\")}</Text>  \n        </TouchableOpacity>  \n  \n        <Text style={styles.subtitle}>{t(\"avatar.subtitle\")}</Text>  \n      </View>  \n  \n      <View style={styles.footer}>  \n        <TouchableOpacity  \n          style={[styles.continueButton, loading && styles.continueButtonDisabled]}  \n          onPress={handleSave}  \n          disabled={loading}  \n        >  \n          {loading ? (  \n            <ActivityIndicator color=\"white\" />  \n          ) : (  \n            <Text style={styles.continueButtonText}>{t(\"avatar.continue\")}</Text>  \n          )}  \n        </TouchableOpacity>  \n      </View>  \n  \n      <View style={styles.languageToggleContainer}>  \n        <LanguageToggle />  \n      </View>  \n    </SafeAreaView>  \n  )  \n}  \n  \nconst styles = StyleSheet.create({  \n  container: {  \n    flex: 1,  \n    backgroundColor: \"#f7f8fa\",  \n  },  \n  header: {  \n    flexDirection: \"row\",  \n    alignItems: \"center\",  \n    justifyContent: \"space-between\",  \n    paddingHorizontal: 20,  \n    paddingTop: 10,  \n    paddingBottom: 20,  \n  },  \n  backButton: {  \n    width: 60,  \n  },  \n  headerTitle: {  \n    fontSize: 18,  \n    fontWeight: \"600\",  \n    color: \"#111\",  \n  },  \n  skipButton: {  \n    width: 60,  \n    alignItems: \"flex-end\",  \n  },  \n  skipButtonText: {  \n    color: \"#2673f3\",  \n    fontSize: 16,  \n    fontWeight: \"500\",  \n  },  \n  content: {  \n    flex: 1,  \n    alignItems: \"center\",  \n    justifyContent: \"center\",  \n    paddingHorizontal: 24,  \n  },  \n  avatarContainer: {  \n    marginBottom: 40,  \n  },  \n  avatarWrapper: {  \n    width: 200,  \n    height: 200,  \n    borderRadius: 100,  \n    overflow: \"hidden\",  \n    borderWidth: 3,  \n    borderColor: \"#e5e5e5\",  \n  },  \n  avatar: {  \n    width: \"100%\",  \n    height: \"100%\",  \n  },  \n  avatarPlaceholder: {  \n    width: \"100%\",  \n    height: \"100%\",  \n    backgroundColor: \"#f0f0f0\",  \n    alignItems: \"center\",  \n    justifyContent: \"center\",  \n  },  \n  changePhotoButton: {  \n    flexDirection: \"row\",  \n    alignItems: \"center\",  \n    borderWidth: 1,  \n    borderColor: \"#2673f3\",  \n    paddingHorizontal: 20,  \n    paddingVertical: 12,  \n    borderRadius: 12,  \n    marginBottom: 40,  \n    backgroundColor: \"white\",  \n  },  \n  changePhotoText: {  \n    color: \"#2673f3\",  \n    fontSize: 16,  \n    fontWeight: \"500\",  \n    marginLeft: 8,  \n  },  \n  subtitle: {  \n    fontSize: 16,  \n    color: \"#667\",  \n    textAlign: \"center\",  \n    lineHeight: 22,  \n    paddingHorizontal: 20,  \n  },  \n  footer: {  \n    paddingHorizontal: 24,  \n    paddingBottom: 40,  \n    paddingTop: 20,  \n  },  \n  continueButton: {  \n    backgroundColor: \"#2673f3\",  \n    paddingVertical: 16,  \n    borderRadius: 12,  \n    alignItems: \"center\",  \n  },  \n  continueButtonDisabled: {  \n    backgroundColor: \"#a0a0a0\",  \n  },  \n  continueButtonText: {  \n    color: \"white\",  \n    fontSize: 16,  \n    fontWeight: \"600\",  \n  },  \n  languageToggleContainer: {  \n    position: \"absolute\",  \n    top: 60,  \n    right: 20,  \n  },  \n})"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}